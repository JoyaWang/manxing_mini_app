# 微信商城小程序快速启动指南

## 功能特性

✅ **完整的购物流程**
- 商品浏览、搜索、分类
- 购物车管理
- 订单创建和支付
- 用户中心

✅ **双后端支持**
- 腾讯云云开发
- Supabase实时数据库
- 一键切换功能

✅ **管理员系统**
- 商品管理
- 订单管理
- 用户管理
- 首页板块配置

✅ **现代化UI设计**
- 响应式布局
- 流畅的动画效果
- 用户友好的交互

## 快速开始

### 1. 选择后端服务

**选项A：使用腾讯云（推荐国内用户）**
1. 注册腾讯云账号
2. 开通云开发服务
3. 获取环境ID
4. 修改 `app.js` 中的配置

**选项B：使用Supabase（推荐海外用户）**
1. 注册Supabase账号
2. 创建新项目
3. 获取URL和API密钥
4. 修改 `app.js` 中的配置

### 2. 配置管理员账号

默认管理员识别规则：
- 用户ID为1
- 或用户名为'admin'

测试时可以使用以下账号：
```javascript
{
  id: 1,
  nickName: 'admin',
  avatarUrl: '管理员头像URL'
}
```

### 3. 登录方式

**消费者登录**：
- 点击"消费者登录"进入购物界面
- 可以浏览商品、下单购物

**管理员登录**：
- 点击"管理员登录"进入管理后台
- 需要管理员权限

### 4. 切换功能

**切换身份**：
- 在用户中心点击"切换身份"
- 在管理后台点击"切换到消费者页面"

**切换后端**：
- 在管理后台点击"切换后端"按钮
- 支持腾讯云 ↔ Supabase 一键切换

## 页面导航

### 主要页面

| 页面 | 路径 | 功能 |
|------|------|------|
| 首页 | `/pages/index/index` | 商品展示、轮播图 |
| 分类 | `/pages/category/category` | 商品分类浏览 |
| 购物车 | `/pages/cart/cart` | 购物车管理 |
| 用户中心 | `/pages/user/user` | 个人信息、订单管理 |
| 登录页 | `/pages/login/index` | 双入口登录系统 |

### 订单流程

1. 浏览商品 → 加入购物车
2. 购物车结算 → 创建订单
3. 选择地址 → 支付订单
4. 查看订单详情

### 管理功能

1. **商品管理**：添加、编辑、上下架商品
2. **订单管理**：查看、处理订单
3. **用户管理**：查看用户信息
4. **板块配置**：控制首页显示内容

## 开发说明

### 项目结构

```
商城小程序/
├── app.js              # 小程序入口，包含后端切换逻辑
├── app.json            # 页面配置
├── app.wxss           # 全局样式
├── pages/             # 页面目录
│   ├── index/         # 首页
│   ├── login/         # 登录页（双入口）
│   ├── admin/         # 管理后台
│   └── user/          # 用户中心
├── utils/             # 工具类
│   ├── api.js         # API客户端（支持双后端）
│   ├── mockData.js    # 模拟数据
│   └── util.js        # 通用工具
└── components/        # 组件目录
```

### 核心功能实现

**后端切换**：
```javascript
// app.js 中的切换方法
switchBackendType(type) {
  if (['tencent', 'supabase'].includes(type)) {
    this.globalData.backendType = type;
    this.initCloudEnvironment();
  }
}
```

**API客户端**：
- 自动适配当前后端类型
- 支持模拟数据模式
- 统一的错误处理

## 测试建议

1. **消费者流程测试**
   - 浏览商品
   - 添加购物车
   - 创建订单
   - 查看订单状态

2. **管理员流程测试**
   - 登录管理后台
   - 查看统计数据
   - 切换后端类型
   - 测试板块配置

3. **切换功能测试**
   - 身份切换：消费者 ↔ 管理员
   - 后端切换：腾讯云 ↔ Supabase

## 部署上线

1. **微信开发者工具**
   - 上传代码
   - 提交审核
   - 发布上线

2. **后端服务部署**
   - 腾讯云：确保云函数部署完成
   - Supabase：检查数据库连接

3. **域名配置**
   - 配置合法域名
   - 配置业务域名

## 技术支持

如遇问题，请检查：
1. 网络连接是否正常
2. 后端服务配置是否正确
3. 微信开发者工具版本
4. 小程序基础库版本

## 更新日志

### v1.0.0
- ✅ 完整的购物流程
- ✅ 双后端支持
- ✅ 管理员系统
- ✅ 现代化UI设计
- ✅ 一键切换功能