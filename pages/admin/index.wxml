<!--pages/admin/index.wxml-->
<view class="container">
  <!-- è¿”å›æŒ‰é’® -->
  <view class="back-button" bindtap="onBackToUserCenter">
    <text class="back-icon">â†</text>
    <text class="back-text">è¿”å›</text>
  </view>
  
  <!-- ç®¡ç†åå°å¤´éƒ¨ -->
  <view class="admin-header">
    <view class="header-title">
      <text class="title">ç®¡ç†åå°</text>
      <text class="subtitle">å•†åŸç®¡ç†ç³»ç»Ÿ</text>
    </view>
      <view class="header-actions">
        <button class="btn-switch-consumer" bindtap="onSwitchToConsumer">
          <text class="switch-icon">ğŸ›’</text>
          <text class="switch-text">æ¶ˆè´¹è€…é¡µé¢</text>
        </button>
        <view class="header-user">
          <image class="user-avatar" src="{{userInfo.avatarUrl}}" />
          <text class="user-name">{{userInfo.nickName}}</text>
        </view>
    </view>
  </view>

  <!-- æ•°æ®æ¦‚è§ˆ - ç´§å‡‘3x2ç½‘æ ¼ -->
  <view class="stats-section">
    <view class="stats-grid">
      <view class="stat-card">
        <view class="stat-icon">ğŸ“¦</view>
        <text class="stat-number">{{stats.products}}</text>
        <text class="stat-label">å•†å“æ€»æ•°</text>
      </view>
      <view class="stat-card">
        <view class="stat-icon">ğŸ“‹</view>
        <text class="stat-number">{{stats.orders}}</text>
        <text class="stat-label">è®¢å•æ€»æ•°</text>
      </view>
      <view class="stat-card">
        <view class="stat-icon">ğŸ‘¥</view>
        <text class="stat-number">{{stats.users}}</text>
        <text class="stat-label">ç”¨æˆ·æ€»æ•°</text>
      </view>
      <view class="stat-card">
        <view class="stat-icon">ğŸ’°</view>
        <text class="stat-number">Â¥{{stats.revenue}}</text>
        <text class="stat-label">æ€»é”€å”®é¢</text>
      </view>
      <view class="stat-card">
        <view class="stat-icon">ğŸ“Š</view>
        <text class="stat-number">{{stats.todayOrders || 0}}</text>
        <text class="stat-label">ä»Šæ—¥è®¢å•</text>
      </view>
      <view class="stat-card">
        <view class="stat-icon">âš ï¸</view>
        <text class="stat-number">{{stats.lowStock || 0}}</text>
        <text class="stat-label">åº“å­˜é¢„è­¦</text>
      </view>
    </view>
  </view>

  <!-- åŠŸèƒ½å¡ç‰‡ç½‘æ ¼ - æ›´ç´§å‡‘çš„3åˆ—å¸ƒå±€ -->
  <view class="compact-grid">
    <view class="compact-row">
      <view class="compact-card" bindtap="onNavigateToProductManage">
        <view class="compact-icon">ğŸ“¦</view>
        <text class="compact-title">å•†å“ç®¡ç†</text>
        <text class="compact-stats">{{stats.products}} å•†å“</text>
      </view>

      <view class="compact-card" bindtap="onNavigateToOrderManage">
        <view class="compact-icon">ğŸ“‹</view>
        <text class="compact-title">è®¢å•ç®¡ç†</text>
        <text class="compact-stats">{{stats.orders}} è®¢å•</text>
      </view>

      <view class="compact-card" bindtap="onNavigateToUserManage">
        <view class="compact-icon">ğŸ‘¥</view>
        <text class="compact-title">ç”¨æˆ·ç®¡ç†</text>
        <text class="compact-stats">{{stats.users}} ç”¨æˆ·</text>
      </view>
    </view>

    <view class="compact-row">
      <view class="compact-card" bindtap="onNavigateToSectionManage">
        <view class="compact-icon">ğŸ </view>
        <text class="compact-title">é¦–é¡µé…ç½®</text>
        <text class="compact-stats">6 æ¿å—</text>
      </view>

      <view class="compact-card primary" bindtap="onAddNewProduct">
        <view class="compact-icon">â•</view>
        <text class="compact-title">æ·»åŠ å•†å“</text>
        <text class="compact-stats">å¿«é€Ÿåˆ›å»º</text>
      </view>

      <view class="compact-card" bindtap="onViewTodayOrders">
        <view class="compact-icon">ğŸ“…</view>
        <text class="compact-title">ä»Šæ—¥è®¢å•</text>
        <text class="compact-stats">å®æ—¶æŸ¥çœ‹</text>
      </view>
    </view>
  </view>

  <!-- å¿«æ·æ“ä½œå·¥å…·æ  - ç´§å‡‘ä¸€è¡Œ -->
  <view class="quick-toolbar">
    <view class="toolbar-title">å¿«æ·æ“ä½œ</view>
    <view class="toolbar-buttons">
      <button class="tool-btn" bindtap="onCheckInventory">
        <text class="tool-icon">ğŸ“Š</text>
        <text class="tool-text">åº“å­˜æ£€æŸ¥</text>
      </button>
      <button class="tool-btn backend" bindtap="onSwitchBackend">
        <text class="tool-icon">ğŸ”„</text>
        <text class="tool-text">åˆ‡æ¢åç«¯</text>
        <text class="backend-badge">{{backendType === 'tencent' ? 'è…¾è®¯äº‘' : 'Supabase'}}</text>
      </button>
    </view>
  </view>

  <!-- å¿«é€Ÿåˆ‡æ¢åˆ°æ¶ˆè´¹è€…é¡µé¢ -->
  <view class="consumer-switch-section">
    <button class="consumer-switch-btn" bindtap="onSwitchToConsumer">
      <text class="switch-icon">ğŸ›’</text>
      <text class="switch-text">åˆ‡æ¢åˆ°æ¶ˆè´¹è€…é¡µé¢</text>
      <text class="switch-subtext">æŸ¥çœ‹å•†åŸå‰å°</text>
    </button>
  </view>

  <!-- åº•éƒ¨å¯¼èˆª -->
  <view class="bottom-nav">
    <button class="btn-back" bindtap="onBackToUserCenter">è¿”å›ç”¨æˆ·ä¸­å¿ƒ</button>
  </view>
</view>
