<!--pages/admin/index.wxml-->
<view class="container">
  <!-- 紧凑头部与数据概览 -->
  <view class="compact-header">
    <view class="header-main">
      <view class="header-info">
        <view class="admin-title">
          <text class="title">管理后台</text>
          <text class="subtitle">商城管理系统</text>
        </view>
        <view class="user-info">
          <image class="user-avatar" src="{{userInfo.avatarUrl}}" />
          <text class="user-name">{{userInfo.nickName}}</text>
        </view>
      </view>

      <!-- 紧凑数据概览 - 水平排列 -->
      <view class="compact-stats">
        <view class="stat-item" bindtap="onNavigateToProductManage">
          <text class="stat-number">{{stats.products}}</text>
          <text class="stat-label">商品</text>
        </view>
        <view class="stat-item" bindtap="onNavigateToOrderManage">
          <text class="stat-number">{{stats.orders}}</text>
          <text class="stat-label">订单</text>
        </view>
        <view class="stat-item" bindtap="onNavigateToUserManage">
          <text class="stat-number">{{stats.users}}</text>
          <text class="stat-label">用户</text>
        </view>
        <view class="stat-item revenue" bindtap="onViewTodayOrders">
          <text class="stat-number">¥{{stats.revenue}}</text>
          <text class="stat-label">销售额</text>
        </view>
      </view>
    </view>
  </view>

  <!-- 功能卡片网格 - 紧凑3x2布局 -->
  <view class="function-grid">
    <view class="function-row">
      <view class="function-card primary" bindtap="onNavigateToProductManage">
        <view class="card-icon">📦</view>
        <view class="card-content">
          <text class="card-title">商品管理</text>
          <text class="card-desc">{{stats.products}} 个商品</text>
        </view>
        <view class="card-arrow">→</view>
      </view>

      <view class="function-card" bindtap="onNavigateToOrderManage">
        <view class="card-icon">📋</view>
        <view class="card-content">
          <text class="card-title">订单管理</text>
          <text class="card-desc">{{stats.orders}} 个订单</text>
        </view>
        <view class="card-arrow">→</view>
      </view>

      <view class="function-card" bindtap="onNavigateToUserManage">
        <view class="card-icon">👥</view>
        <view class="card-content">
          <text class="card-title">用户管理</text>
          <text class="card-desc">{{stats.users}} 位用户</text>
        </view>
        <view class="card-arrow">→</view>
      </view>
    </view>

    <view class="function-row">
      <view class="function-card" bindtap="onNavigateToSectionManage">
        <view class="card-icon">🏠</view>
        <view class="card-content">
          <text class="card-title">首页配置</text>
          <text class="card-desc">6 个板块</text>
        </view>
        <view class="card-arrow">→</view>
      </view>

      <view class="function-card accent" bindtap="onAddNewProduct">
        <view class="card-icon">➕</view>
        <view class="card-content">
          <text class="card-title">添加商品</text>
          <text class="card-desc">快速创建</text>
        </view>
        <view class="card-arrow">→</view>
      </view>

      <view class="function-card" bindtap="onCheckInventory">
        <view class="card-icon">📊</view>
        <view class="card-content">
          <text class="card-title">库存检查</text>
          <text class="card-desc">库存预警</text>
        </view>
        <view class="card-arrow">→</view>
      </view>
    </view>
  </view>

  <!-- 快捷操作栏 - 紧凑底部 -->
  <view class="quick-actions">
    <view class="action-buttons">
      <button class="action-btn switch" bindtap="onSwitchToConsumer">
        <text class="action-icon">🛒</text>
        <text class="action-text">消费者页面</text>
      </button>
      <button class="action-btn backend" bindtap="onSwitchBackend">
        <text class="action-icon">🔄</text>
        <text class="action-text">{{backendType === 'tencent' ? '腾讯云' : 'Supabase'}}</text>
      </button>
      <button class="action-btn back" bindtap="onBackToUserCenter">
        <text class="action-icon">←</text>
        <text class="action-text">返回</text>
      </button>
    </view>
  </view>
</view>
