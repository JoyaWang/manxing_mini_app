<!--pages/user/address.wxml-->
<view class="container">
  <!-- è¿”å›æŒ‰é’® -->
  <view class="back-button" bindtap="onGoBack">
    <text class="back-icon">â†</text>
    <text class="back-text">è¿”å›</text>
  </view>
  
  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="loading" wx:if="{{loading}}">
    <text>åŠ è½½ä¸­...</text>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty" wx:if="{{!loading && addresses.length === 0}}">
    <text class="empty-icon">ğŸ“</text>
    <text class="empty-text">æš‚æ— æ”¶è´§åœ°å€</text>
    <text class="empty-desc">æ·»åŠ æ”¶è´§åœ°å€ä»¥ä¾¿å¿«é€Ÿä¸‹å•</text>
  </view>

  <!-- åœ°å€åˆ—è¡¨ -->
  <scroll-view class="address-list" scroll-y wx:else>
    <view class="addresses">
      <view 
        class="address-card {{item.isDefault ? 'default' : ''}}"
        wx:for="{{addresses}}"
        wx:key="id"
        data-id="{{item.id}}"
        bindtap="{{selectMode ? 'onSelectAddress' : ''}}"
      >
        <view class="address-header">
          <text class="name">{{item.name}}</text>
          <text class="phone">{{item.phone}}</text>
          <text class="default-tag" wx:if="{{item.isDefault}}">é»˜è®¤</text>
        </view>
        <text class="address-detail">{{item.province}}{{item.city}}{{item.district}}{{item.detail}}</text>
        
        <!-- æ“ä½œæŒ‰é’® -->
        <view class="address-actions" wx:if="{{!selectMode}}">
          <text 
            class="btn-action" 
            data-id="{{item.id}}"
            bindtap="onEditAddress"
          >
            ç¼–è¾‘
          </text>
          <text 
            class="btn-action" 
            data-id="{{item.id}}"
            bindtap="onDeleteAddress"
          >
            åˆ é™¤
          </text>
          <text 
            class="btn-action primary" 
            wx:if="{{!item.isDefault}}"
            data-id="{{item.id}}"
            bindtap="onSetDefaultAddress"
          >
            è®¾ä¸ºé»˜è®¤
          </text>
        </view>
      </view>
    </view>
  </scroll-view>

  <!-- æ·»åŠ æŒ‰é’® -->
  <view class="add-button" wx:if="{{!selectMode}}">
    <button class="btn-add" bindtap="onAddAddress">æ·»åŠ æ–°åœ°å€</button>
  </view>
</view>