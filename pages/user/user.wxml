<!--pages/user/user.wxml-->
<view class="container">
  <!-- ç”¨æˆ·ä¿¡æ¯ -->
  <view class="user-section">
    <view class="user-info" wx:if="{{hasUserInfo}}">
      <image class="avatar" src="{{avatarUrl}}" />
      <view class="user-details">
        <text class="username">{{nickName}}</text>
        <text class="welcome">æ¬¢è¿æ¥åˆ°å•†åŸå°ç¨‹åº</text>
      </view>
    </view>
    <view class="login-btn" wx:else bindtap="onNavigateToLogin">
      <text>ç‚¹å‡»ç™»å½•</text>
    </view>
  </view>

  <!-- è®¢å•çŠ¶æ€ -->
  <view class="order-stats-section card">
    <view class="stats-header">
      <text class="title">æˆ‘çš„è®¢å•</text>
      <text class="view-all" bindtap="onNavigateToOrders" data-tab="all">æŸ¥çœ‹å…¨éƒ¨ ></text>
    </view>
    <view class="stats-grid">
      <view 
        class="stat-item" 
        wx:for="{{['pending', 'paid', 'shipped', 'completed']}}"
        wx:key="*this"
        data-tab="{{item}}"
        bindtap="onNavigateToOrders"
      >
        <text class="stat-count">{{orderStats[item]}}</text>
        <text class="stat-label">{{getOrderStatusText(item)}}</text>
      </view>
    </view>
  </view>

  <!-- ä¸»åŠŸèƒ½èœå• -->
  <view class="menu-section card">
    <view 
      class="menu-item" 
      wx:for="{{menuItems}}"
      wx:key="name"
      data-index="{{index}}"
      bindtap="handleMenuItemTap"
    >
      <view class="menu-icon-container">
        <text class="menu-icon">{{item.icon === 'order' ? 'ğŸ“¦' : 
                              item.icon === 'address' ? 'ğŸ“' : 
                              item.icon === 'favorite' ? 'â¤ï¸' : 
                              item.icon === 'payment' ? 'ğŸ’³' : 
                              item.icon === 'settings' ? 'âš™ï¸' : ''}}</text>
      </view>
      <text class="menu-name">{{item.name}}</text>
      <text class="menu-arrow">â€º</text>
    </view>
  </view>

  <!-- åˆ‡æ¢èº«ä»½å…¥å£ -->
  <view class="menu-section card" wx:if="{{userInfo && isAdmin}}">
    <view class="menu-item" bindtap="switchToAdmin">
      <view class="menu-icon-container">
        <text class="menu-icon">ğŸ‘‘</text>
      </view>
      <text class="menu-name">åˆ‡æ¢åˆ°ç®¡ç†ç•Œé¢</text>
      <text class="menu-arrow">â€º</text>
    </view>
  </view>

  <!-- åº•éƒ¨æ“ä½œ -->
  <view class="action-section">
    <button class="btn-contact" bindtap="onContactCustomerService">è”ç³»å®¢æœ</button>
    <button class="btn-about" bindtap="onAboutUs">å…³äºæˆ‘ä»¬</button>
    <button class="btn-logout" wx:if="{{userInfo}}" bindtap="onLogout">é€€å‡ºç™»å½•</button>
  </view>
</view>
